<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICIL 2025 - In-Plant Logistics Simulation</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#0a0a0a">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-content">
                <h1>In-Plant Logistics Simulation</h1>
                <p>Advanced Path Optimization with Obstacle-Aware Navigation</p>
            </div>
        </header>
        
        <div class="app-layout">
            <!-- Left Sidebar - Tools & Controls -->
            <aside class="sidebar left-sidebar">
                <div class="panel-card">
                    <h3>ğŸ› ï¸ Tools</h3>
                    <div class="tool-group">
                        <button data-tool="node" class="tool-btn active" title="Add Nodes (Key: 1)">
                            ğŸ“ Add Nodes <span class="hotkey">1</span>
                        </button>
                        <button data-tool="select" class="tool-btn" title="Select/Move (Key: 2)">
                            ğŸ‘† Select/Move <span class="hotkey">2</span>
                        </button>
                        <button data-tool="obstacle" class="tool-btn" title="Draw Obstacles (Key: 3)">
                            ğŸš§ Draw Obstacles <span class="hotkey">3</span>
                        </button>
                    </div>
                </div>
                
                <div class="panel-card">
                    <h3>ğŸ¢ Background</h3>
                    <div class="file-upload-group">
                        <input type="file" id="backgroundUpload" accept="image/*" class="file-input">
                        <label for="backgroundUpload" class="file-label">
                            ğŸ“ Upload Floor Plan
                        </label>
                        <button id="clearBackground" class="btn btn-secondary">Clear</button>
                    </div>
                </div>
                
                <div class="panel-card">
                    <h3>âš¡ Quick Actions</h3>
                    <div class="actions-grid">
                        <button id="runAll" class="btn btn-primary" title="Run All Algorithms (Key: R)">
                            â–¶ï¸ Run All <span class="hotkey">R</span>
                        </button>
                        <button id="clearNodes" class="btn btn-secondary">ğŸ—‘ï¸ Clear Nodes</button>
                        <button id="clearObstacles" class="btn btn-secondary">ğŸš« Clear Obstacles</button>
                        <button id="clearAll" class="btn btn-warning" title="Clear Everything (Key: C)">
                            ğŸ—‘ï¸ Clear All <span class="hotkey">C</span>
                        </button>
                    </div>
                </div>
                
                <div class="panel-card">
                    <h3>ğŸ’¾ Data Management</h3>
                    <div class="file-group">
                        <button id="exportScenario" class="btn btn-accent">ğŸ“¤ Export Scenario</button>
                        <input type="file" id="importUpload" accept=".json" class="file-input">
                        <label for="importUpload" class="file-label">ğŸ“¥ Import Scenario</label>
                    </div>
                </div>
                
                <div class="panel-card">
                    <h3>ğŸ‘ï¸ View Options</h3>
                    <div class="toggle-group">
                        <button id="toggleGrid" class="btn btn-toggle">ğŸ“ Toggle Grid</button>
                        <button id="toggleSnap" class="btn btn-toggle">ğŸ§² Snap to Grid</button>
                        <button id="toggleBlockedConnections" class="btn btn-toggle">ğŸš« Show Blocked Paths</button>
                    </div>
                </div>
            </aside>
            
            <!-- Main Canvas Area -->
            <main class="main-content">
                <div class="canvas-header">
                    <div class="algorithm-selector">
                        <label for="algorithmSelect">Algorithm:</label>
                        <select id="algorithmSelect" class="algorithm-select">
                            <option value="">ğŸ¤– Select Algorithm to Run</option>
                            <option value="tpsma">ğŸ¦  TPSMA (Bio-inspired Slime Mold)</option>
                            <option value="ga">ğŸ§¬ Genetic Algorithm (Evolutionary)</option>
                            <option value="christofides">âš–ï¸ Christofides (1.5-approximation)</option>
                        </select>
                    </div>
                    
                    <div class="canvas-stats" id="canvasStats">
                        <span>Nodes: <strong id="nodeCount">0</strong></span>
                        <span>Obstacles: <strong id="obstacleCount">0</strong></span>
                    </div>
                </div>
                
                <div class="canvas-container">
                    <canvas id="canvas"></canvas>
                    <div class="canvas-overlay">
                        <div class="tool-indicator" id="toolIndicator">
                            ğŸ“ Click to add nodes
                        </div>
                    </div>
                </div>
            </main>
            
            <!-- Right Sidebar - Results & Parameters -->
            <aside class="sidebar right-sidebar">
                <div class="panel-card results-card">
                    <h3>ğŸ“Š Algorithm Comparison</h3>
                    <div id="resultsPanel" class="results-container">
                        <div class="no-results">
                            <p>ğŸš€ No results yet</p>
                            <p>Run algorithms to see performance comparison</p>
                        </div>
                    </div>
                </div>
                
                <div class="panel-card parameters-card">
                    <h3>ğŸ”§ TPSMA Parameters</h3>
                    <div id="tpsmaParams" class="params-container"></div>
                </div>
                
                <div class="panel-card parameters-card">
                    <h3>ğŸ§¬ GA Parameters</h3>
                    <div id="gaParams" class="params-container"></div>
                </div>
                
                <div class="panel-card parameters-card">
                    <h3>âš–ï¸ Christofides Parameters</h3>
                    <div id="christofidesParams" class="params-container"></div>
                </div>
            </aside>
        </div>
        
        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="statusText">Ready - Select a tool and start building your logistics scenario</span>
            </div>
            <div class="status-right">
                <span>Hotkeys: 1-3 (Tools) | R (Run) | C (Clear) | Del (Delete) | Enter (Finish)</span>
            </div>
        </footer>
    </div>

    <!-- Status Message Overlay -->
    <div id="statusMessage" class="status-message" style="display: none;"></div>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
